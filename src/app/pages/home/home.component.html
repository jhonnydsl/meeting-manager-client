<nav class="navbar" role="navigation" aria-label="Barra principal">
  <button
    class="menu-btn"
    type="button"
    (click)="toggleSidebar()"
    [attr.aria-expanded]="sidebarOpen"
    aria-controls="main-sidebar"
    title="Abrir menu"
  >
    &#9776;
  </button>

  <h1 class="app-title">Meeting Manager</h1>

  <div class="navbar-actions">
    <div class="user-info">
      <mat-icon>account_circle</mat-icon>
      <span class="username">Jhonny</span>
    </div>
    <button
      mat-icon-button
      color="warn"
      aria-label="Logout"
      (click)="onLogout()"
    >
      <mat-icon>power_settings_new</mat-icon>
    </button>
  </div>
</nav>

<aside
  id="main-sidebar"
  class="sidebar"
  [class.open]="sidebarOpen"
  role="complementary"
>
  <ul>
    <li><a routerLink="/meetings">Reuniões</a></li>
    <li><a routerLink="/invitations">Convites</a></li>
    <li><a routerLink="/friends">Amigos</a></li>
    <li><a routerLink="/requests">Solicitações de amizade</a></li>
  </ul>
</aside>

<main class="content" [class.shift]="sidebarOpen" role="main">
  <header class="content-header">
    <h2>Minhas Reuniões</h2>
    <button mat-raised-button class="btn-blue" (click)="openCreateMeeting()">
      + Nova reunião
    </button>
  </header>

  <section class="meeting-list" aria-live="polite">
    <div *ngIf="loading" class="loading">Carregando...</div>

    <div *ngIf="!loading && meetings?.length === 0" class="empty">
      Nenhuma reunião criada ainda.
    </div>

    <div *ngIf="!loading">
      <div
        *ngFor="let meeting of meetings; trackBy: trackByMeeting"
        class="meeting-item mat-elevation-z1"
      >
        <div class="meeting-info">
          <h3>{{ meeting.title }}</h3>
          <p class="meta">
            {{ meeting.startDate | date : "short" }} —
            {{ meeting.endDate | date : "short" }}
          </p>
          <p class="desc">{{ meeting.description }}</p>
        </div>

        <div class="meeting-actions">
          <button
            mat-icon-button
            aria-label="Iniciar"
            (click)="startMeeting(meeting)"
          >
            <mat-icon>play_arrow</mat-icon>
          </button>

          <button mat-button color="primary" (click)="openEditMeeting(meeting)">
            <mat-icon>edit</mat-icon>
            Editar
          </button>

          <button mat-button color="warn" (click)="openDeleteDialog(meeting)">
            <mat-icon>delete</mat-icon>
            Excluir
          </button>
        </div>
      </div>
    </div>
  </section>
</main>

<ng-template #startDialog let-data>
  <div class="start-dialog">
    <h3>Entrar na reunião</h3>
    <p>Funcionalidade de entrada (WebRTC) será implementada aqui.</p>
    <p>
      <strong>{{ data?.meeting?.title }}</strong>
    </p>
    <div class="dialog-actions">
      <button mat-button mat-dialog-close>Fechar</button>
    </div>
  </div>
</ng-template>
